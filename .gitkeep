// Minimal AI Companion Content Script

class AICompanion {
  constructor() {
    this.avatar = null;
    this.speechBubble = null;
    this.init();
  }

  init() {
    this.createAvatar();
    this.createSpeechBubble();
    this.attachEventListeners();
  }

  createAvatar() {
    if (document.getElementById('ai-companion-avatar')) return;
    this.avatar = document.createElement('div');
    this.avatar.id = 'ai-companion-avatar';
    this.avatar.style.position = 'fixed';
    this.avatar.style.bottom = '20px';
    this.avatar.style.right = '20px';
    this.avatar.style.zIndex = '999999';
    this.avatar.innerHTML = `<img src="${chrome.runtime.getURL('images/its-peak-fiction.gif')}" style="width:60px;height:60px;border-radius:50%;">`;
    document.body.appendChild(this.avatar);
  }

  createSpeechBubble() {
    this.speechBubble = document.createElement('div');
    this.speechBubble.id = 'ai-companion-speech';
    this.speechBubble.style.position = 'fixed';
    this.speechBubble.style.bottom = '90px';
    this.speechBubble.style.right = '20px';
    this.speechBubble.style.background = '#fff';
    this.speechBubble.style.padding = '10px 16px';
    this.speechBubble.style.borderRadius = '16px';
    this.speechBubble.style.boxShadow = '0 4px 16px rgba(0,0,0,0.15)';
    this.speechBubble.style.display = 'none';
    this.speechBubble.style.zIndex = '999999';
    document.body.appendChild(this.speechBubble);
  }

  attachEventListeners() {
    window.addEventListener('scroll', () => this.showMessage('You scrolled!'));
    document.addEventListener('click', (e) => {
      if (!this.avatar.contains(e.target)) this.showMessage('You clicked!');
    });
  }

  showMessage(text) {
    this.speechBubble.textContent = text;
    this.speechBubble.style.display = 'block';
    setTimeout(() => {
      this.speechBubble.style.display = 'none';
    }, 2000);
  }
}

if (!window.aiCompanion) window.aiCompanion = new AICompanion(); 